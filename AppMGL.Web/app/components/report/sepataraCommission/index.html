<div class="view indent">
    <div>
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title"></h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-sm btn-info" box-widget="collapse"><i class="fa fa-minus" ng-hide="true"></i><span>Hide</span></button>
                </div>
            </div>
            <div class="box-body">
                <ng-form class="form-horizontal detail-container" name="form.detail" novalidate="novalidate">
                    <div class="form-group">
                        <label class="col-sm-2 control-label required">Department</label>
                        <div class="col-sm-4" show-errors="{ skipFormGroupCheck: true }">
                            <select class="form-control" name="departmentId" ng-model="entity.departmentId" ng-options="t.departmentID as t.department for t in lookups.departments" ng-required="true" ng-disabled="true"></select>
                        </div>
                        <!--<label class="col-sm-2 control-label required">Site</label>
                        <div class="col-sm-4" show-errors="{ skipFormGroupCheck: true }">
                            <select class="form-control" name="siteId" ng-model="entity.siteId" ng-options="t.SitId as t.SitName for t in lookups.sites" ng-required="true"></select>
                        </div>-->
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label required">Start Date</label>
                        <div class="col-sm-4" show-errors="{ skipFormGroupCheck: true }">
                            <input type="text" class="form-control" name="startBookingDate" ng-model="entity.startBookingDate" input-date="true" show-time="false" ng-required="true" />
                        </div>
                        <label class="col-sm-2 control-label required">End Date</label>
                        <div class="col-sm-4" show-errors="{ skipFormGroupCheck: true }">
                            <input type="text" class="form-control" name="endBookingDate" ng-model="entity.endBookingDate" input-date="true" show-time="false" ng-required="true" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <label class="col-sm-2 control-label ">System Ref. No.</label>
                            <div class="col-sm-2" show-errors="{ skipFormGroupCheck: true }">
                                <input type="text" class="form-control" name="refno" ng-model="entity.SystemRefNo"  />
                            </div>
                            <div>
                                <label class="col-sm-2 control-label ">QB Status</label>
                                <div class="col-sm-2" show-errors="{ skipFormGroupCheck: true }">
                                    <select class="form-control" id="qbstatus" name="qbstatus" ng-model="entity.QBStatus"  >
                                        <option value="" selected>All</option>
                                        <option value="Matured">Matured</option>
                                        <option value="Un-Matured">Un-Matured</option>

                                    </select>
                                </div>
                                <label class="col-sm-2 control-label ">Matured Month</label>
                                <div class="col-sm-2" show-errors="{ skipFormGroupCheck: true }">
                                    <input id="txtMATUREDMONTH"  type="text" class="form-control" name="Matured Month" ng-model="entity.QBMaturedMonth"/>
                                </div>
                            </div>

                        </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">&nbsp;</label>

                            <div class="col-sm-10">

                                <label styple="color:red;" class="col-sm-3 control-label"><input type="radio" id="chkisinvoiceready1" name="isinvoiceready" ng-model="entity.isinvoiceready" value="1" checked="true"/>  Not Ready For Invoicing </label>

                                <label styple="color:green;" class="col-sm-3 control-label"><input type="radio" id="chkisinvoiceready2" name="isinvoiceready" ng-model="entity.isinvoiceready" value="2" />Ready for Invoicing</label>

                                <label styple="color:blue;" class="col-sm-2 control-label"><input type="radio" id="chkisinvoiceready3" name="isinvoiceready" ng-model="entity.isinvoiceready" value="3" />Invoiced </label>

                                <label class="col-sm-2 control-label"><input type="radio" id="chkisinvoiceready4" name="isinvoiceready" ng-model="entity.isinvoiceready" value="4" /> All </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-8">
                                <ul>
                                    <li style="color:red">Note: Report will be populated based on ETS</li>
                                </ul>
                            </div>
                            <div class="col-sm-4">
                                <span>&nbsp;</span>
                            </div>
                        </div>
</ng-form>
            </div>
            <div class="box-footer">
                <div class="box-tools pull-left">
                    <ul>
                        <li style="color:green">Green color showing customer mapped with quick book.</li>
                        <li style="color:red">Red color showing customer not mapped with quick book.</li>
                    </ul>
                </div>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-sm btn-primary" ng-click="performSubAction($event, null)" action="showReport"><i class="fa fa-bar-chart"></i> Show</button>
                        <button type="button" class="btn btn-sm btn-primary" ng-click="performSubAction($event, null)" action="exportReport"><i class="fa fa-download"></i> Export to Excel</button>
                        <button type="button" class="btn btn-sm btn-primary" ng-click="quickbookcall()" action="showReport"><i class="fa-fast-forward"></i> Refresh Token</button>
                    </div>
                </div>
            </div>
        <div class="box box-primary">
            <div class="box-body">
                <div style="overflow:auto;">
                    <table ng-table="reportTable" class="table table-striped table-bordered table-hover" template-pagination="customPager">
                        <thead>
                            <tr class="bg-thead">
                                <th class="col-sm-1 text-left">Sepatra Commission</th>
                                <th class="col-sm-1 text-left">System RefNo</th>
                                <th class="col-sm-1 text-left">Booking No</th>
                                <th class="col-sm-1 text-left">Quote No</th>
                                <th class="col-sm-1 text-left">Customer</th>
                                <th class="col-sm-1 text-left">Sepatra Partner Name</th>
                                <th class="col-sm-1 text-left">VESSEL</th>
                                <th class="col-sm-1 text-left">VOYAGE</th>
                                <th class="col-sm-1 text-left">Line B/L#</th>
                                <th class="col-sm-1 text-left">Container NO</th>
                                <th class="col-sm-1 text-left">Line Name</th>
                                <th class="col-sm-1 text-left">Trucker Name</th>
                                <th class="col-sm-1 text-left">Other Name</th>
                                <th class="col-sm-1 text-left">Mode Of Service</th>
                                <th class="col-sm-1 text-left">Origin Port</th>
                                <th class="col-sm-1 text-left">Descharge Port</th>
                                <th class="col-sm-1 text-left">ETS</th>
                                <th class="col-sm-1 text-left">ETA</th>
                                <th class="col-sm-1 text-left">40'</th>
                                <th class="col-sm-1 text-left">45'</th>
                                <th class="col-sm-1 text-left">20'</th>
                                <th class="col-sm-1 text-left">RORO & LCL IN CBM</th>
                                <th class="col-sm-1 text-right">FREIGHT Sales</th>
                                <th class="col-sm-1 text-right">INLAND Sales</th>
                                <th class="col-sm-1 text-right">COURIER Sales</th>
                                <th class="col-sm-1 text-right">OTHER Sales</th>
                                <th class="col-sm-1 text-right">GROSS SALES</th>
                                <th class="col-sm-1 text-right">FREIGHT COST</th>
                                <th class="col-sm-1 text-right">LINER COMM AMT / ADJ</th>
                                <th class="col-sm-1 text-right">INLAND COST</th>
                                <th class="col-sm-1 text-right">COURIER COST</th>
                                <th class="col-sm-1 text-right">OTHER COST</th>
                                <th class="col-sm-1 text-right">GROSS COST</th>
                                <th class="col-sm-1 text-right">First Party Comm.</th>
                                <th class="col-sm-1 text-right">Sec. Party Comm.</th>
                                <th class="col-sm-1 text-right">QB Status</th>
                                <th class="col-sm-1 text-right">QB Matured Month</th>
                                <th class="col-sm-1 text-right"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="ng-table-group" ng-repeat-start="group in $groups">
                                <td colspan="38">
                                    <a href="" ng-click="group.$hideRows = !group.$hideRows">
                                        <span class="fa" ng-class="{ 'fa-chevron-right': group.$hideRows, 'fa-chevron-down': !group.$hideRows }"></span>
                                        {{group.data[0].sitName}}
                                    </a>
                                </td>
                            </tr>
                            <tr ng-hide="group.$hideRows" ng-repeat="d in group.data">
                                <td class="col-sm-1 text-left">
                                   
                                        <div class="box-tools pull-left" ng-if="d.sepataraCommission===0">
                                            <button type="button" class="btn btn-sm btn-primary" ng-click="performQuickBookAddComm($event, null,d)" docrequired="{{d.docRequired}}" ishbl="{{d.isHBL}}" ismbl="{{d.isMBL}}" isco="{{d.isCO}}" isdockreceipt="{{d.isDockReceipt}}" isshipper="{{d.isShipper}}" isbooking="{{d.isBooking}}" isother="{{d.isOther}}" isaes="{{d.isAES}}" isporttoport="{{d.isPortToPort}}" islinembl="{{d.isLineMBL}}" docno="{{d.fileNo}}" entityid="{{d.fileNo+';'+d.qb}}" docid="{{d.documentCommonID}}"><i class="fa fa-download"></i> Add  </button>
                                        </div>
                                    <div class="box-tools pull-left" ng-if="d.sepataraCommission!==0">
                                         {{d.sepataraCommission }}
                                    </div>
</td>
                                  <td class="col-sm-1 text-left">
                                    {{d.fileNo }}

                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.bookingNo}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.quotationNo}}
                                </td>
                                <td class="col-sm-1 text-left" >
                                 <a  ng-click="callCompanyModal(d.customerID)" action="add" ng-style="d.qbid > 1 ? {'color': 'green'} : {'color': 'red'}">{{d.companyName}}</a>
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.sepataraPartnerName}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.vessel}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.voyage}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.blNumber}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.containerNumber}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.shippingLine}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.transporter}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.otherName}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.modeofService}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.portOfOrigin}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.portOfDischarge}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.ets | date:'MM/dd/yyyy'}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.eta | date:'MM/dd/yyyy'}}
                                </td>

                                <td class="col-sm-1 text-left">
                                    {{d.isContainer40Exits}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.isContainer45Exits}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.isContainer20Exits}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.volumeInCB}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.freighT_SELLING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.inlanD_SELLING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.courieR_SELLING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.otheR_SELLING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.totaL_SELLING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.freighT_BUYING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.freighT_Comm | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.inlanD_BUYING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.courieR_BUYING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.otheR_BUYING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.totaL_BUYING_RATE | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.firstPartyAmount }}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.secondPartyAmount }}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.qbStatus }}
                                </td>
                                
                                <td class="col-sm-1 text-right">
                                    {{d.qbMaturedMonth }}
                                </td>

                                <td class="col-sm-1 text-right">
                                    <span ng-show="d.invoiceid != '0'">
                                        <!--<button type="button" class="btn btn-sm btn-primary" ng-click="resetInvoice($event, null)" action="QBSignInBatchRef" docno="{{d.fileNo}}" entityid="{{d.documentCommonID}}"><i class="fa fa-download"></i> Reset</button>-->
                                    </span>
                                </td>
                            </tr>
                            <tr ng-repeat-end>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                               
                                <td class="col-sm-1 text-right">
                                    Total
                                </td>
                                <td class="col-sm-1 text-left text-bold text-italic">
                                    {{sum(group.data, "isContainer40Exits") | number:2}}
                                </td>

                                <td class="col-sm-1 text-left text-bold text-italic">
                                    {{sum(group.data, "isContainer45Exits") | number:2}}
                                </td>

                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "isContainer20Exits") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "freighT_SELLING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "inlanD_SELLING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "courieR_SELLING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "otheR_SELLING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "totaL_SELLING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "freighT_BUYING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "freighT_Comm") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "inlanD_BUYING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "courieR_BUYING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "otheR_BUYING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{sum(group.data, "totaL_BUYING_RATE") | number:2}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                            </tr>
                            <tr ng-if="params.total() == 0">
                                <td class="text-center text-italic" colspan="37">No Record(s) Found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $('#Button').removeAttr('disabled');
</script>