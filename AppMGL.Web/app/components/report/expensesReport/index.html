<div class="view indent">
    <div>
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title"></h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-sm btn-info" box-widget="collapse"><i class="fa fa-minus" ng-hide="true"></i><span>Hide</span></button>
                </div>
            </div>
            <div class="box-body">
                <ng-form class="form-horizontal detail-container" name="form.detail" novalidate="novalidate">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Select</label>
                        <div class="col-sm-2">
                            <select class="form-control" name="searchOption" ng-model="entity.selectOption" ng-options="item.optionValue as item.optionName for item in searchOptions"></select>
                        </div>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" name="searchBox" ng-model="entity.searchBox" maxlength="100" uib-typeahead="o.name for o in searchValues($viewValue,selectOption)" />
                        </div>
                        <div class="col-sm-5">
                            <span>&nbsp;</span>
                        </div>                       
                    </div>   
                    <div class="form-group">
                        <label class="col-sm-2 control-label">DateWise Filters</label>
                        <div class="col-sm-2">
                            <select class="form-control" name="selectDateOption" ng-model="selectDateOption" ng-options="item.optionValue as item.optionName for item in seachDateFilters" ng-change="clearDates(selectDateOption)"></select>
                        </div>
                        <label class="col-sm-1 control-label">From Date</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" name="fromDate" ng-model="fromDate" input-date="true" show-time="false" />
                        </div>
                        <label class="col-sm-1 control-label">To Date</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" name="toDate" ng-model="toDate" input-date="true" show-time="false" />
                        </div>
                        <div class="col-sm-2">
                            <span>&nbsp;</span>
                        </div> 
                    </div>
                    
                   
                </ng-form>
            </div>
            <div class="box-footer">
                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-sm btn-primary" ng-click="performBookingSearch($event,selectDateOption, fromDate, toDate)" action="showReport"><i class="fa fa-bar-chart"></i> Show</button>
                    <button type="button" class="btn btn-sm btn-primary" ng-click="exportExpensesReport($event,selectDateOption, fromDate, toDate)" action="exportReport"><i class="fa fa-download"></i> Export to Excel</button>
                </div>
            </div>
        </div>
        <div class="box box-primary">
            <div class="box-body">
                <div style="overflow:auto;">
                    <table ng-table="reportTable" class="table table-striped table-bordered table-hover" template-pagination="customPager">
                        <thead>
                            <tr class="bg-thead">

                                <th class="col-sm-1 text-left">Booking No</th>
                                <th class="col-sm-1 text-left">Customer</th>
                                <th class="col-sm-1 text-left">Vendor Name</th>
                                <th class="col-sm-1 text-left">Document Ref No</th>
                                <th class="col-sm-1 text-left">Document Date</th>
                                <th class="col-sm-1 text-left">Amount</th>
                                <th class="col-sm-1 text-left">Narration</th>
                                <th class="col-sm-1 text-left">Expense Head</th>
                                <th class="col-sm-1 text-left">ETS</th>
                                <th class="col-sm-1 text-left">ETA</th>
                                <th class="col-sm-1 text-left">Created On</th>
                                <th class="col-sm-1 text-left">Modified On</th>
                                <th class="col-sm-1 text-left">Remarks</th>                                
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="ng-table-group" ng-repeat-start="group in $groups">
                                <td colspan="13">

                                    <a href="" ng-click="group.$hideRows = !group.$hideRows">
                                        <span class="fa" ng-class="{ 'fa-chevron-right': group.$hideRows, 'fa-chevron-down': !group.$hideRows }">System Ref No: </span>
                                        {{group.data[0].fileNo}}
                                    </a>
                                </td>
                            </tr>
                            <tr ng-hide="group.$hideRows" ng-repeat="d in group.data">
                                <td class="col-sm-1 text-left">
                                    {{d.bookingNo}}
                                </td>                                                             
                                <td class="col-sm-1 text-left">
                                    {{d.customerName}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.vendorName}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.docNo}}
                                </td>                               
                                <td class="col-sm-1 text-left">
                                    {{d.docDate | date:'MM/dd/yyyy'}}
                                </td>
                                <td class="col-sm-1 text-right">
                                    {{d.sellingAmount | number:2}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.narration}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.expenseHead}}
                                </td>                                
                                <td class="col-sm-1 text-left">
                                    {{d.ets | date:'MM/dd/yyyy'}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.eta | date:'MM/dd/yyyy'}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.createdOn | date:'MM/dd/yyyy'}}
                                </td>
                                <td class="col-sm-1 text-left">
                                    {{d.lastUpdatedDate | date:'MM/dd/yyyy'}}
                                </td>

                                <td class="col-sm-1 text-left">
                                    {{d.remarks}}
                                </td>                               
                               
                            </tr>
                            <tr ng-repeat-end>
                                
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    Total
                                </td>                               
                                <td class="col-sm-1 text-right text-bold text-italic">
                                    {{sum(group.data, "sellingAmount") | number:2}}
                                </td> 

                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td>   
                                <td class="col-sm-1 text-right">
                                    &nbsp;
                                </td> 
                            </tr>
                            <tr ng-if="params.total() == 0">
                                <td class="text-center text-italic" colspan="13">No Record(s) Found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>